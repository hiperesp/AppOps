<div class="col-md-6 pt-3">
    <form action="/{{ namespace.name }}/{{ app.name }}?tab=form_sse" method="post">
        <input type="hidden" name="action" value="scale">

        <h4>Scaling Settings</h4>
        <p class="text-body-secondary">Scaling settings for your app.</p>

        <hr>

        <div>
            <div class="d-flex justify-content-between mb-2">
                <h5 class="mb-0">Replicas</h5>
                <a href="javascript:void(0)" class="small" data-id="add-new-replica">Add new replica</a>
            </div>
            <p class="small text-body-secondary">Replicas are the number of instances of your app that are running.</p>
            <div class="rounded border pt-2 pb-3" data-id="has-replicas">
                <div class="row m-0" data-id="replica-list">
                    {% set replicas = 0 %}
                    {% for key, value in app.replicas %}
                        {% if value > 0 %}
                            {% set replicas = replicas + value %}
                            <div class="col-md-4 form-group mb-3">
                                <label for="replicas-{{ key }}" class="small fw-bold">{{ key }} instances</label>
                                <input type="number" class="form-control" id="replicas-{{ key }}" name="process[{{ key }}]" value="{{ value }}" min="0" required>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="small text-body-secondary px-2">If you've mistyped the process name or need to eliminate, just assign it a value of zero.</div>
            </div>
            <div data-id="no-replicas">
                <div class="display-5 text-body-secondary my-3">No replicas running</div>
                <div class="small text-body-secondary">You can add a new replica by clicking the button above.</div>
            </div>
        </div>

        <hr>

        <div class="mb-3">
            <button type="submit" class="btn btn-dark w-100">Save</button>
        </div>
    </form>
</div>
<script src="/assets/js/app-settings-scale-replicas.js"></script>