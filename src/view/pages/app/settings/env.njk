{% set configGroups = {
    userDefined: 'User defined',
    dokku: 'Dokku',
    deployApp: 'System'
} %}
<div class="col-md-9 pt-3">

    <div class="d-flex justify-content-between align-items-center gap-1">
        <h4>Environment Variables</h4>
        <button type="button" class="btn btn-dark btn-sm">New environment variable</button>
    </div>
    <p class="text-body-secondary mb-1">Environment variables for your app.</p>

    <div data-id="tab-group">
        <ul class="nav nav-tabs px-3 mb-3">
            {% for configGroup, configGroupName in configGroups %}
                <li class="nav-item">
                    <a href="javascript:void(0)" class="nav-link" data-set-tab="{{ configGroup }}">{{ configGroupName }}</a>
                </li>
            {% endfor %}
        </ul>

        {% for configGroup, configVariables in app.config %}
            <div data-tab="{{ configGroup }}">
                {% for key, value in configVariables %}
                    <div class="card mb-3">
                        <div class="card-header d-flex justify-content-between align-items-center gap-1">
                            <span class="monospace">{{ key }}</span>
                            <span>
                                <a href="javascript:void(0)" class="small">Edit</a>
                                <a href="javascript:void(0)" class="small">Delete</a>
                            </span>
                        </div>
                        <div class="card-body monospace pre">{{ value | censorEnv(key) }}</div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>

    <script>
(function() {
    document.querySelectorAll("[data-id='tab-group']").forEach(function(tabGroup) {
        const tabButtons = tabGroup.querySelectorAll("[data-set-tab]");
        const tabs = tabGroup.querySelectorAll("[data-tab]");

        function setTab(event) {
            const tabToSet = event.target.dataset.setTab;

            tabButtons.forEach(function(tabButton) {
                if(tabButton.dataset.setTab == tabToSet) {
                    tabButton.classList.add("active");
                } else {
                    tabButton.classList.remove("active");
                }
            });

            tabs.forEach(function(tab) {
                if(tab.dataset.tab == tabToSet) {
                    tab.classList.remove("d-none");
                } else {
                    tab.classList.add("d-none");
                }
            });
        }
        
        tabButtons.forEach(function(tabButton) {
            tabButton.addEventListener("click", setTab);
        });

        tabs.forEach(function(tab) {
            tab.classList.add("d-none");
        });

        tabButtons[0].dispatchEvent(new Event("click"));

    });
})();
    </script>

</div>
